def ciServer = 'TRAVIS'
def executingOnCI = "true" == System.getenv(ciServer)

if (executingOnCI) {
    println "ğŸ‘  On CI(Travis CI) building....\n"
    def mapKey = System.getenv('MAP_KEY')
    print "ğŸ‘ " + mapKey + "\n"
    def fileName = "src/main/res/values/map_key.xml"
    def mapKeyFile = new File(fileName)
    if (mapKeyFile.exists()) {
        println("A file named " + fileName + " already exisits in the same folder.")
    } else {
        def content = "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" +
                "<resources>\n" +
                "    <string name=\"google_maps_key\">" + mapKey +
                "</string>\n" +
                "</resources>"
        print "ğŸ‘ \n" + content + "\n"
        try {
            if(!mapKeyFile.createNewFile()) {
                print("ğŸ›‘ Cannot create " + fileName + ".ğŸ›‘ \n")
            }
            print(fileName + " is OK: " + mapKeyFile.exists() + ", is file: " + mapKeyFile.isFile())
            mapKeyFile.write(content)
        } catch(e) {
            print "ğŸ›‘ " + e + "ğŸ›‘\n"
        }
    }
}